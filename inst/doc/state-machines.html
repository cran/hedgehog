<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="data:text/css;charset=utf-8,%0A%40font%2Dface%20%7B%0Afont%2Dfamily%3A%20octicons%2Dlink%3B%0Asrc%3A%20url%28data%3Afont%2Fwoff%3Bcharset%3Dutf%2D8%3Bbase64%2Cd09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM%2B8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB%2FaFGpk3jaTY6xa8JAGMW%2FO62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v%2Bk%2F0an2i%2BitHDw3v2%2B9%2BDBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3%2FI7AtxEJLtzzuZfI%2BVVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy%2FLt7Kc%2B0vWY%2FgAgIIEqAN9we0pwKXreiMasxvabDQMM4riO%2BqxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw%2Bymhce7vwM9jSqO8JyVd5RH9gyTt2%2BJ%2FyUmYlIR0s04n6%2B7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv%2FocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi%2BW2%2BMjCzMIDApSwvXzC97Z4Ig8N%2FBxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh%2F8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT%2BAEjAwuDFpBmA9KMDEwMCh9i%2Fv8H8sH0%2F4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9%2FlqYwOGZxeUelN2U2R6%2BcArgtCJpauW7UQBqnFkUsjAY%2FkOU1cP%2BDAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl%2BvvmM%2FbyA48e6tWrKArm4ZJlCbdsrxksL1AwWn%2FyBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO%2F%2FsdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd%2F89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF%2B9JOS0nbaaYDCQfwCJ7Au3AHj%2BLO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm%2BEBXuAbHmIMSRMs%2B4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL%2BhD7C1xoaHeLJSEao0FEW14ckxC%2BTU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13%2F%2Blm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl%2B9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O%2FAdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB%2F%2F%2FAA8AAQAAAAAAAAAAAAAAAAABAAAAAA%3D%3D%29%20format%28%27woff%27%29%3B%0A%7D%0Abody%20%7B%0A%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0Atext%2Dsize%2Dadjust%3A%20100%25%3B%0Acolor%3A%20%23333%3B%0Afont%2Dfamily%3A%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20%22Segoe%20UI%22%2C%20Arial%2C%20freesans%2C%20sans%2Dserif%2C%20%22Apple%20Color%20Emoji%22%2C%20%22Segoe%20UI%20Emoji%22%2C%20%22Segoe%20UI%20Symbol%22%3B%0Afont%2Dsize%3A%2016px%3B%0Aline%2Dheight%3A%201%2E6%3B%0Aword%2Dwrap%3A%20break%2Dword%3B%0A%7D%0Aa%20%7B%0Abackground%2Dcolor%3A%20transparent%3B%0A%7D%0Aa%3Aactive%2C%0Aa%3Ahover%20%7B%0Aoutline%3A%200%3B%0A%7D%0Astrong%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%202em%3B%0Amargin%3A%200%2E67em%200%3B%0A%7D%0Aimg%20%7B%0Aborder%3A%200%3B%0A%7D%0Ahr%20%7B%0Abox%2Dsizing%3A%20content%2Dbox%3B%0Aheight%3A%200%3B%0A%7D%0Apre%20%7B%0Aoverflow%3A%20auto%3B%0A%7D%0Acode%2C%0Akbd%2C%0Apre%20%7B%0Afont%2Dfamily%3A%20monospace%2C%20monospace%3B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ainput%20%7B%0Acolor%3A%20inherit%3B%0Afont%3A%20inherit%3B%0Amargin%3A%200%3B%0A%7D%0Ahtml%20input%5Bdisabled%5D%20%7B%0Acursor%3A%20default%3B%0A%7D%0Ainput%20%7B%0Aline%2Dheight%3A%20normal%3B%0A%7D%0Ainput%5Btype%3D%22checkbox%22%5D%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0Apadding%3A%200%3B%0A%7D%0Atable%20%7B%0Aborder%2Dcollapse%3A%20collapse%3B%0Aborder%2Dspacing%3A%200%3B%0A%7D%0Atd%2C%0Ath%20%7B%0Apadding%3A%200%3B%0A%7D%0A%2A%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0A%7D%0Ainput%20%7B%0Afont%3A%2013px%20%2F%201%2E4%20Helvetica%2C%20arial%2C%20nimbussansl%2C%20liberationsans%2C%20freesans%2C%20clean%2C%20sans%2Dserif%2C%20%22Apple%20Color%20Emoji%22%2C%20%22Segoe%20UI%20Emoji%22%2C%20%22Segoe%20UI%20Symbol%22%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%234078c0%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%2C%0Aa%3Aactive%20%7B%0Atext%2Ddecoration%3A%20underline%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%200%3B%0Amargin%3A%2015px%200%3B%0Aoverflow%3A%20hidden%3B%0Abackground%3A%20transparent%3B%0Aborder%3A%200%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%7D%0Ahr%3Abefore%20%7B%0Adisplay%3A%20table%3B%0Acontent%3A%20%22%22%3B%0A%7D%0Ahr%3Aafter%20%7B%0Adisplay%3A%20table%3B%0Aclear%3A%20both%3B%0Acontent%3A%20%22%22%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Amargin%2Dtop%3A%2015px%3B%0Amargin%2Dbottom%3A%2015px%3B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%2030px%3B%0A%7D%0Ah2%20%7B%0Afont%2Dsize%3A%2021px%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%2016px%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%2014px%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%2012px%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%2011px%3B%0A%7D%0Ablockquote%20%7B%0Amargin%3A%200%3B%0A%7D%0Aul%2C%0Aol%20%7B%0Apadding%3A%200%3B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Aol%20ol%2C%0Aul%20ol%20%7B%0Alist%2Dstyle%2Dtype%3A%20lower%2Droman%3B%0A%7D%0Aul%20ul%20ol%2C%0Aul%20ol%20ol%2C%0Aol%20ul%20ol%2C%0Aol%20ol%20ol%20%7B%0Alist%2Dstyle%2Dtype%3A%20lower%2Dalpha%3B%0A%7D%0Add%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0Afont%2Dsize%3A%2012px%3B%0A%7D%0Apre%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0Afont%3A%2012px%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0A%7D%0A%2Eselect%3A%3A%2Dms%2Dexpand%20%7B%0Aopacity%3A%200%3B%0A%7D%0A%2Eocticon%20%7B%0Afont%3A%20normal%20normal%20normal%2016px%2F1%20octicons%2Dlink%3B%0Adisplay%3A%20inline%2Dblock%3B%0Atext%2Ddecoration%3A%20none%3B%0Atext%2Drendering%3A%20auto%3B%0A%2Dwebkit%2Dfont%2Dsmoothing%3A%20antialiased%3B%0A%2Dmoz%2Dosx%2Dfont%2Dsmoothing%3A%20grayscale%3B%0A%2Dwebkit%2Duser%2Dselect%3A%20none%3B%0A%2Dmoz%2Duser%2Dselect%3A%20none%3B%0A%2Dms%2Duser%2Dselect%3A%20none%3B%0Auser%2Dselect%3A%20none%3B%0A%7D%0A%2Eocticon%2Dlink%3Abefore%20%7B%0Acontent%3A%20%27%5Cf05c%27%3B%0A%7D%0A%2Emarkdown%2Dbody%3Abefore%20%7B%0Adisplay%3A%20table%3B%0Acontent%3A%20%22%22%3B%0A%7D%0A%2Emarkdown%2Dbody%3Aafter%20%7B%0Adisplay%3A%20table%3B%0Aclear%3A%20both%3B%0Acontent%3A%20%22%22%3B%0A%7D%0A%2Emarkdown%2Dbody%3E%2A%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%20%21important%3B%0A%7D%0A%2Emarkdown%2Dbody%3E%2A%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%20%21important%3B%0A%7D%0Aa%3Anot%28%5Bhref%5D%29%20%7B%0Acolor%3A%20inherit%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0A%2Eanchor%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%2Dright%3A%202px%3B%0Amargin%2Dleft%3A%20%2D18px%3B%0A%7D%0A%2Eanchor%3Afocus%20%7B%0Aoutline%3A%20none%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Amargin%2Dtop%3A%201em%3B%0Amargin%2Dbottom%3A%2016px%3B%0Afont%2Dweight%3A%20bold%3B%0Aline%2Dheight%3A%201%2E4%3B%0A%7D%0Ah1%20%2Eocticon%2Dlink%2C%0Ah2%20%2Eocticon%2Dlink%2C%0Ah3%20%2Eocticon%2Dlink%2C%0Ah4%20%2Eocticon%2Dlink%2C%0Ah5%20%2Eocticon%2Dlink%2C%0Ah6%20%2Eocticon%2Dlink%20%7B%0Acolor%3A%20%23000%3B%0Avertical%2Dalign%3A%20middle%3B%0Avisibility%3A%20hidden%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%2C%0Ah2%3Ahover%20%2Eanchor%2C%0Ah3%3Ahover%20%2Eanchor%2C%0Ah4%3Ahover%20%2Eanchor%2C%0Ah5%3Ahover%20%2Eanchor%2C%0Ah6%3Ahover%20%2Eanchor%20%7B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah2%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah3%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah4%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah5%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah6%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%20%7B%0Avisibility%3A%20visible%3B%0A%7D%0Ah1%20%7B%0Apadding%2Dbottom%3A%200%2E3em%3B%0Afont%2Dsize%3A%202%2E25em%3B%0Aline%2Dheight%3A%201%2E2%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah1%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%3B%0A%7D%0Ah2%20%7B%0Apadding%2Dbottom%3A%200%2E3em%3B%0Afont%2Dsize%3A%201%2E75em%3B%0Aline%2Dheight%3A%201%2E225%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah2%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E5em%3B%0Aline%2Dheight%3A%201%2E43%3B%0A%7D%0Ah3%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E2%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%201%2E25em%3B%0A%7D%0Ah4%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E2%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ah5%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%201em%3B%0Acolor%3A%20%23777%3B%0A%7D%0Ah6%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ap%2C%0Ablockquote%2C%0Aul%2C%0Aol%2C%0Adl%2C%0Atable%2C%0Apre%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%204px%3B%0Apadding%3A%200%3B%0Amargin%3A%2016px%200%3B%0Abackground%2Dcolor%3A%20%23e7e7e7%3B%0Aborder%3A%200%20none%3B%0A%7D%0Aul%2C%0Aol%20%7B%0Apadding%2Dleft%3A%202em%3B%0A%7D%0Aul%20ul%2C%0Aul%20ol%2C%0Aol%20ol%2C%0Aol%20ul%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Ali%3Ep%20%7B%0Amargin%2Dtop%3A%2016px%3B%0A%7D%0Adl%20%7B%0Apadding%3A%200%3B%0A%7D%0Adl%20dt%20%7B%0Apadding%3A%200%3B%0Amargin%2Dtop%3A%2016px%3B%0Afont%2Dsize%3A%201em%3B%0Afont%2Dstyle%3A%20italic%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adl%20dd%20%7B%0Apadding%3A%200%2016px%3B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0Ablockquote%20%7B%0Apadding%3A%200%2015px%3B%0Acolor%3A%20%23777%3B%0Aborder%2Dleft%3A%204px%20solid%20%23ddd%3B%0A%7D%0Ablockquote%3E%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Ablockquote%3E%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Atable%20%7B%0Adisplay%3A%20block%3B%0Awidth%3A%20100%25%3B%0Aoverflow%3A%20auto%3B%0Aword%2Dbreak%3A%20normal%3B%0Aword%2Dbreak%3A%20keep%2Dall%3B%0A%7D%0Atable%20th%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Atable%20th%2C%0Atable%20td%20%7B%0Apadding%3A%206px%2013px%3B%0Aborder%3A%201px%20solid%20%23ddd%3B%0A%7D%0Atable%20tr%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Aborder%2Dtop%3A%201px%20solid%20%23ccc%3B%0A%7D%0Atable%20tr%3Anth%2Dchild%282n%29%20%7B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%3B%0Abox%2Dsizing%3A%20content%2Dbox%3B%0Abackground%2Dcolor%3A%20%23fff%3B%0A%7D%0Acode%20%7B%0Apadding%3A%200%3B%0Apadding%2Dtop%3A%200%2E2em%3B%0Apadding%2Dbottom%3A%200%2E2em%3B%0Amargin%3A%200%3B%0Afont%2Dsize%3A%2085%25%3B%0Abackground%2Dcolor%3A%20rgba%280%2C0%2C0%2C0%2E04%29%3B%0Aborder%2Dradius%3A%203px%3B%0A%7D%0Acode%3Abefore%2C%0Acode%3Aafter%20%7B%0Aletter%2Dspacing%3A%20%2D0%2E2em%3B%0Acontent%3A%20%22%5C00a0%22%3B%0A%7D%0Apre%3Ecode%20%7B%0Apadding%3A%200%3B%0Amargin%3A%200%3B%0Afont%2Dsize%3A%20100%25%3B%0Aword%2Dbreak%3A%20normal%3B%0Awhite%2Dspace%3A%20pre%3B%0Abackground%3A%20transparent%3B%0Aborder%3A%200%3B%0A%7D%0A%2Ehighlight%20%7B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0A%2Ehighlight%20pre%2C%0Apre%20%7B%0Apadding%3A%2016px%3B%0Aoverflow%3A%20auto%3B%0Afont%2Dsize%3A%2085%25%3B%0Aline%2Dheight%3A%201%2E45%3B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0A%7D%0A%2Ehighlight%20pre%20%7B%0Amargin%2Dbottom%3A%200%3B%0Aword%2Dbreak%3A%20normal%3B%0A%7D%0Apre%20%7B%0Aword%2Dwrap%3A%20normal%3B%0A%7D%0Apre%20code%20%7B%0Adisplay%3A%20inline%3B%0Amax%2Dwidth%3A%20initial%3B%0Apadding%3A%200%3B%0Amargin%3A%200%3B%0Aoverflow%3A%20initial%3B%0Aline%2Dheight%3A%20inherit%3B%0Aword%2Dwrap%3A%20normal%3B%0Abackground%2Dcolor%3A%20transparent%3B%0Aborder%3A%200%3B%0A%7D%0Apre%20code%3Abefore%2C%0Apre%20code%3Aafter%20%7B%0Acontent%3A%20normal%3B%0A%7D%0Akbd%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%3A%203px%205px%3B%0Afont%2Dsize%3A%2011px%3B%0Aline%2Dheight%3A%2010px%3B%0Acolor%3A%20%23555%3B%0Avertical%2Dalign%3A%20middle%3B%0Abackground%2Dcolor%3A%20%23fcfcfc%3B%0Aborder%3A%20solid%201px%20%23ccc%3B%0Aborder%2Dbottom%2Dcolor%3A%20%23bbb%3B%0Aborder%2Dradius%3A%203px%3B%0Abox%2Dshadow%3A%20inset%200%20%2D1px%200%20%23bbb%3B%0A%7D%0A%2Epl%2Dc%20%7B%0Acolor%3A%20%23969896%3B%0A%7D%0A%2Epl%2Dc1%2C%0A%2Epl%2Ds%20%2Epl%2Dv%20%7B%0Acolor%3A%20%230086b3%3B%0A%7D%0A%2Epl%2De%2C%0A%2Epl%2Den%20%7B%0Acolor%3A%20%23795da3%3B%0A%7D%0A%2Epl%2Ds%20%2Epl%2Ds1%2C%0A%2Epl%2Dsmi%20%7B%0Acolor%3A%20%23333%3B%0A%7D%0A%2Epl%2Dent%20%7B%0Acolor%3A%20%2363a35c%3B%0A%7D%0A%2Epl%2Dk%20%7B%0Acolor%3A%20%23a71d5d%3B%0A%7D%0A%2Epl%2Dpds%2C%0A%2Epl%2Ds%2C%0A%2Epl%2Ds%20%2Epl%2Dpse%20%2Epl%2Ds1%2C%0A%2Epl%2Dsr%2C%0A%2Epl%2Dsr%20%2Epl%2Dcce%2C%0A%2Epl%2Dsr%20%2Epl%2Dsra%2C%0A%2Epl%2Dsr%20%2Epl%2Dsre%20%7B%0Acolor%3A%20%23183691%3B%0A%7D%0A%2Epl%2Dv%20%7B%0Acolor%3A%20%23ed6a43%3B%0A%7D%0A%2Epl%2Did%20%7B%0Acolor%3A%20%23b52a1d%3B%0A%7D%0A%2Epl%2Dii%20%7B%0Abackground%2Dcolor%3A%20%23b52a1d%3B%0Acolor%3A%20%23f8f8f8%3B%0A%7D%0A%2Epl%2Dsr%20%2Epl%2Dcce%20%7B%0Acolor%3A%20%2363a35c%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dml%20%7B%0Acolor%3A%20%23693a17%3B%0A%7D%0A%2Epl%2Dmh%2C%0A%2Epl%2Dmh%20%2Epl%2Den%2C%0A%2Epl%2Dms%20%7B%0Acolor%3A%20%231d3e81%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmq%20%7B%0Acolor%3A%20%23008080%3B%0A%7D%0A%2Epl%2Dmi%20%7B%0Acolor%3A%20%23333%3B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0A%2Epl%2Dmb%20%7B%0Acolor%3A%20%23333%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmd%20%7B%0Abackground%2Dcolor%3A%20%23ffecec%3B%0Acolor%3A%20%23bd2c00%3B%0A%7D%0A%2Epl%2Dmi1%20%7B%0Abackground%2Dcolor%3A%20%23eaffea%3B%0Acolor%3A%20%2355a532%3B%0A%7D%0A%2Epl%2Dmdr%20%7B%0Acolor%3A%20%23795da3%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmo%20%7B%0Acolor%3A%20%231d3e81%3B%0A%7D%0Akbd%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%3A%203px%205px%3B%0Afont%3A%2011px%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0Aline%2Dheight%3A%2010px%3B%0Acolor%3A%20%23555%3B%0Avertical%2Dalign%3A%20middle%3B%0Abackground%2Dcolor%3A%20%23fcfcfc%3B%0Aborder%3A%20solid%201px%20%23ccc%3B%0Aborder%2Dbottom%2Dcolor%3A%20%23bbb%3B%0Aborder%2Dradius%3A%203px%3B%0Abox%2Dshadow%3A%20inset%200%20%2D1px%200%20%23bbb%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%20%7B%0Alist%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%2B%2Etask%2Dlist%2Ditem%20%7B%0Amargin%2Dtop%3A%203px%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%20input%20%7B%0Amargin%3A%200%200%2E35em%200%2E25em%20%2D1%2E6em%3B%0Avertical%2Dalign%3A%20middle%3B%0A%7D%0A%3Achecked%2B%2Eradio%2Dlabel%20%7B%0Az%2Dindex%3A%201%3B%0Aposition%3A%20relative%3B%0Aborder%2Dcolor%3A%20%234078c0%3B%0A%7D%0A%2EsourceLine%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0A%7D%0Acode%20%2Ekw%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Edt%20%7B%20color%3A%20%23ed6a43%3B%20%7D%0Acode%20%2Edv%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Ebn%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Efl%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Ech%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Est%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%2Eco%20%7B%20color%3A%20%23969896%3B%20%7D%0Acode%20%2Eot%20%7B%20color%3A%20%230086b3%3B%20%7D%0Acode%20%2Eal%20%7B%20color%3A%20%23a61717%3B%20%7D%0Acode%20%2Efu%20%7B%20color%3A%20%2363a35c%3B%20%7D%0Acode%20%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%0Acode%20%2Ewa%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Ecn%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Esc%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Evs%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%2Ess%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%2Eim%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Eva%20%7Bcolor%3A%20%23008080%3B%20%7D%0Acode%20%2Ecf%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Eop%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Ebu%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Eex%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Epp%20%7B%20color%3A%20%23999999%3B%20%7D%0Acode%20%2Eat%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Edo%20%7B%20color%3A%20%23969896%3B%20%7D%0Acode%20%2Ean%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Ecv%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Ein%20%7B%20color%3A%20%23008080%3B%20%7D%0A" rel="stylesheet">
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="hedgehog---state-machine-testing">Hedgehog - State Machine Testing</h1>
<p>Huw Campbell<br />
2018-08-17</p>
<p><img src="data:image/png;base64,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" width="307" align="right" /></p>
<blockquote>
<p>Hedgehog will eat all your bugs.</p>
</blockquote>
<p>State machine testing in <a href="http://hedgehog.qa/">Hedgehog</a> is an interesting and expressive testing paradigm for R.</p>
<p>The goal is to test object oriented code or complex systems involving state and hidden or abstracted functionality.</p>
<p>John Hughes has a series of excellent <a href="https://www.youtube.com/watch?v=H18vxq-VsCk">talks</a> regarding testing of state based and non-deterministic systems using QuviQ's proprietary QuickCheck implementation, which has been using these techniques to great effect for many years.</p>
<p>Here's a quick example: the following code is a reference class which maintains a lookup for values, with integer keys. One could also imagine writing a fast implementation of this in c. If you haven't seen reference classes before, that's ok – one can think of them as akin to C++ classes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">refs &lt;-<span class="st"> </span><span class="kw">setRefClass</span>(<span class="st">&quot;Refs&quot;</span>,
    <span class="dt">fields =</span> <span class="kw">list</span>(
        <span class="dt">num =</span> <span class="st">&quot;numeric&quot;</span>
      , <span class="dt">refs =</span> <span class="st">&quot;list&quot;</span>
      )
  , <span class="dt">methods =</span> <span class="kw">list</span>(
        <span class="dt">initialize =</span> <span class="cf">function</span>() .self<span class="op">$</span><span class="kw">reset</span>()
      , <span class="dt">newRef =</span> <span class="cf">function</span>() {
        .self<span class="op">$</span>num &lt;-<span class="st"> </span>.self<span class="op">$</span>num <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
        .self<span class="op">$</span>refs[[.self<span class="op">$</span>num]] &lt;-<span class="st"> </span><span class="dv">0</span>
        <span class="kw">return</span> ( .self<span class="op">$</span>num )
      }
      , <span class="dt">readRef =</span> <span class="cf">function</span>(i) {
        <span class="kw">return</span> ( .self<span class="op">$</span>refs[[i]] )
      }
      , <span class="dt">writeRef =</span> <span class="cf">function</span>(i, a) {
        .self<span class="op">$</span>refs[[i]] &lt;-<span class="st"> </span>a
        <span class="kw">invisible</span>(<span class="ot">NULL</span>)
      }
      , <span class="dt">reset =</span> <span class="cf">function</span>() {
        .self<span class="op">$</span>num =<span class="st"> </span><span class="dv">0</span>
        .self<span class="op">$</span>refs =<span class="st"> </span><span class="kw">list</span>()
        <span class="kw">invisible</span>(<span class="ot">NULL</span>)
      }
    )
)
grefs &lt;-<span class="st"> </span>refs<span class="op">$</span><span class="kw">new</span>()</code></pre></div>
<p>We use the <code>grefs</code> value as a global system which we will interact with.</p>
<p>How would we test this object? Using hedgehog, we will simulate a model for this class as a list of tuples, one for naming the map entry, and one for its value. For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="dt">key =</span> <span class="dv">2</span>, <span class="dt">val =</span> <span class="dv">0</span>)</code></pre></div>
<pre><code>## $key
## [1] 2
## 
## $val
## [1] 0</code></pre>
<p>The commands we can use to interact with the reference class api are creating a new map entry, writing to a map entry, and reading a map entry.</p>
<p>We will define a hedgehog command which will be used to test the <code>newRef</code> functionality of the class.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new  &lt;-<span class="st"> </span><span class="kw">command</span> ( <span class="st">&quot;New&quot;</span>,
    <span class="dt">generator =</span> <span class="cf">function</span>( state ) <span class="kw">list</span>()
  , <span class="dt">execute   =</span> <span class="cf">function</span>() grefs<span class="op">$</span><span class="kw">newRef</span>()
  , <span class="dt">update    =</span> <span class="cf">function</span>( state, output )
      <span class="kw">snoc</span>( state, <span class="kw">list</span>(<span class="dt">key =</span> output, <span class="dt">val =</span> <span class="dv">0</span>))
  )</code></pre></div>
<p>The <code>command</code> function takes a name of the function, which will be shown when presenting counterexamples, as well as a set of functions which are used when building and exercising this class's functionality.</p>
<p>The generator function is provided with the current state of the system while we are running the generators and generates the list of arguments which should be passed to the <code>new</code> function while it is being executed.</p>
<p>Here, the <code>new</code> command doesn't take an input, so this is the empty list (the arguments are curried to the property functions using <code>do.call</code>).</p>
<p>The <code>execute</code> function will take the inputs generated by the generator, and applies them. In our case, there is no input (as mentioned above), so this function takes no arguments. Inside the <code>execute</code> function we actually call the <code>newRef()</code> function of the class.</p>
<p>Finally the <code>update</code> function shown will add a new value to the test's model of the system. This function is run both at generation time and during execution of the property. This is interesting because during generation, there isn't actually a value for the output which we can pass to this function. Instead, we pass a symbolic value representing the output and what it will be during execution. This does have one interesting side effect, in that we can not permit one to look at or examine the value of the output in this function. It must be agnostic to whether the value is the type it expects.</p>
<p>For <code>new</code> the update function is rather simple, and just adds a new map entry with value <code>0</code> to the model.</p>
<p>We can now test this functionality with an initial state.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">initialmodel &lt;-<span class="st"> </span><span class="kw">list</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_that</span>( <span class="st">&quot;Registry State Machine Model&quot;</span>,
  <span class="kw">forall</span>( <span class="kw">gen.actions</span> ( initialmodel, <span class="kw">list</span>(new) ), <span class="cf">function</span>( actions ) {
    grefs<span class="op">$</span><span class="kw">reset</span>()
    <span class="kw">expect_sequential</span>( initialmodel, actions )
  })
)</code></pre></div>
<p>And it passes. Hedgehog has generated a random list of commands (all of which are <code>new</code>) and run them.</p>
<p>Let's look at the functions we have used: <code>gen.actions</code> is a generator which will build a list of commands to call, ensuring that the preconditions are sound, and providing sensible shrinks; the test, <code>expect_sequential</code>, is an expectation which will run the actions and the post condition expectations. Notice that inside the <code>forall</code>, we also call <code>grefs$reset()</code>; this ensures that the global state is in a pristine condition before the tests are run.</p>
<p>There aren't actually any expectations in this model, so it's not too surprising that the test passes.</p>
<p>Now we can make this test more interesting and will add a command for the <code>readRef</code> functionality of the system.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">read &lt;-<span class="st"> </span><span class="kw">command</span> ( <span class="st">&quot;Read&quot;</span>,
    <span class="dt">generator =</span> <span class="cf">function</span>( state ) {
      <span class="cf">if</span> ( <span class="kw">length</span>(state) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> )
        <span class="kw">return</span>(<span class="ot">NULL</span>)
      <span class="kw">list</span>(
        <span class="dt">key =</span> <span class="kw">gen.with</span>(<span class="kw">gen.element</span>( state ), <span class="cf">function</span>(i) i<span class="op">$</span>key )
      )}
  , <span class="dt">require =</span> <span class="cf">function</span>( state, key )
      <span class="op">!</span><span class="kw">is.null</span> ( <span class="kw">Find</span>( <span class="cf">function</span>( proc ) { proc<span class="op">$</span>key <span class="op">==</span><span class="st"> </span>key } , state ) )
  , <span class="dt">execute =</span> <span class="cf">function</span>( key ) grefs<span class="op">$</span><span class="kw">readRef</span>(key)
  , <span class="dt">ensure  =</span> <span class="cf">function</span>( state, output, key ) {
      expected &lt;-<span class="st"> </span><span class="kw">Find</span>( <span class="cf">function</span>( proc ) { proc<span class="op">$</span>key <span class="op">==</span><span class="st"> </span>key } , state )<span class="op">$</span>val
      <span class="kw">expect_equal</span>( expected, output)
    }
  )</code></pre></div>
<p>There quite a few interesting things going on here. Firstly the generator now is a function which will choose one of the <code>keys</code> to read. Notice that if the model is currently empty, we return <code>NULL</code>. This is one of the ways we ensure we only run <code>read</code> after a call to <code>new</code> has been performed. The <code>require</code> function is also applicable here, but furthermore tests that the generated function inputs are valid – this is important during shrinking, as we don't want to cull a command during shrinking and then end up with an invalid state.</p>
<p>The <code>execute</code> function now takes the <code>key</code> to read, and can pass it to <code>readRef</code>.</p>
<p>Finally, we have an <code>ensure</code> function. After execution, we run this function, and any <code>testthat</code> expectations within it.</p>
<p>Ok, let's add the final command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">write &lt;-<span class="st"> </span><span class="kw">command</span> ( <span class="st">&quot;Write&quot;</span>,
    <span class="dt">generator =</span> <span class="cf">function</span>( state ) {
      <span class="cf">if</span> ( <span class="kw">length</span>(state) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> )
        <span class="kw">return</span>(<span class="ot">NULL</span>)
      <span class="kw">list</span> (
        <span class="dt">key =</span> <span class="kw">gen.map</span>( <span class="cf">function</span>(i) i<span class="op">$</span>key, <span class="kw">gen.element</span>( state ))
      , <span class="dt">val =</span> <span class="kw">gen.int</span>(<span class="dv">10</span>)
      )}
  , <span class="dt">require =</span> <span class="cf">function</span>( state, key, val )
      <span class="op">!</span><span class="kw">is.null</span> ( <span class="kw">Find</span>( <span class="cf">function</span>( proc ) { proc<span class="op">$</span>key <span class="op">==</span><span class="st"> </span>key } , state ) )
  , <span class="dt">execute =</span> <span class="cf">function</span>( key, val ) grefs<span class="op">$</span><span class="kw">writeRef</span>( key, val )
  , <span class="dt">update  =</span> <span class="cf">function</span>( state, output, key, val )
      <span class="kw">lapply</span>( state, <span class="cf">function</span>(proc)
        <span class="cf">if</span> (proc<span class="op">$</span>key <span class="op">==</span><span class="st"> </span>key) <span class="kw">list</span>(<span class="dt">key =</span> proc<span class="op">$</span>key, <span class="dt">val =</span> val) <span class="cf">else</span> proc
      )
  )</code></pre></div>
<p>Now we can run the tests with <code>new</code>, <code>read</code>, and <code>write</code> commands.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_that</span>( <span class="st">&quot;Registry State Machine Model&quot;</span>,
  <span class="kw">forall</span>( <span class="kw">gen.actions</span> ( initialmodel, <span class="kw">list</span>(new, read, write) ), <span class="cf">function</span>( actions ) {
    grefs<span class="op">$</span><span class="kw">reset</span>()
    <span class="kw">expect_sequential</span>( initialmodel, actions )
  })
)</code></pre></div>
<p>These tests now pass, meaning our model and our system are consistent. Let's now subtly break something, so we can show how counterexamples and shrinking work. What we'll do is write an incorrect <code>write</code> function, which writes a value incremented by <code>1</code>, instead of the correct value. This will cause the model and reality to clash.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">writeIncorrect &lt;-<span class="st"> </span><span class="kw">command</span> ( <span class="st">&quot;Write (Broken)&quot;</span>,
    <span class="dt">generator =</span> <span class="cf">function</span>( state ) {
      <span class="cf">if</span> ( <span class="kw">length</span>(state) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> )
        <span class="kw">return</span>(<span class="ot">NULL</span>)
      <span class="kw">list</span> (
        <span class="dt">key =</span> <span class="kw">gen.with</span>( <span class="kw">gen.element</span>( state ), <span class="cf">function</span>(i) i<span class="op">$</span>key)
      , <span class="dt">val =</span> <span class="kw">gen.int</span>(<span class="dv">10</span>)
      )}
  , <span class="dt">require =</span> <span class="cf">function</span>( state, key, val )
      <span class="op">!</span><span class="kw">is.null</span> ( <span class="kw">Find</span>( <span class="cf">function</span>( proc ) { proc<span class="op">$</span>key <span class="op">==</span><span class="st"> </span>key } , state ) )
  , <span class="dt">execute =</span> <span class="cf">function</span>( key, val ) grefs<span class="op">$</span><span class="kw">writeRef</span>( key, val <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)
  , <span class="dt">update  =</span> <span class="cf">function</span>( state, output, key, val )
      <span class="kw">lapply</span>( state, <span class="cf">function</span>(proc)
        <span class="cf">if</span> (proc<span class="op">$</span>key <span class="op">==</span><span class="st"> </span>key) <span class="kw">list</span>(<span class="dt">key =</span> proc<span class="op">$</span>key, <span class="dt">val =</span> val) <span class="cf">else</span> proc
      )
  )</code></pre></div>
<p>Now we'll run the expectation with the incorrect write function as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_that</span>( <span class="st">&quot;Registry State Machine Model&quot;</span>,
  <span class="kw">forall</span>( <span class="kw">gen.actions</span> ( initialmodel, <span class="kw">list</span>(new, read, write, writeIncorrect) ), <span class="cf">function</span>( actions ) {
    grefs<span class="op">$</span><span class="kw">reset</span>()
    <span class="kw">expect_sequential</span>( initialmodel, actions )
  })
)</code></pre></div>
<pre><code>## Error: Test failed: 'Registry State Machine Model'
## * Falsifiable after 12 tests, and 3 shrinks
## `expected` not equal to `output`.
## 1/1 mismatches
## [1] 1 - 2 == -1 
## Counterexample:
## [[1]]
## New 
## output variable: 1 
## 
## [[2]]
## Write (Broken) 
## inputs:
## $key
## Var 1 (symbolic)
## $val
## [1] 1
## 
## output variable: 2 
## 
## [[3]]
## Read 
## inputs:
## $key
## Var 1 (symbolic)
## output variable: 3</code></pre>
<p>One can see that the minimal shrink for incorrect behaviour has been found: where we create a new value; write to it with the broken function; and read the value, finding it is inconsistent with our model.</p>

</body>
</html>
